<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="https://jqwidgets.com/public/jqwidgets/styles/jqx.base.css">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxcore.js"></script>
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxdata.js"></script> 
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxbuttons.js"></script>
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxscrollbar.js"></script> 
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxmenu.js"></script> 
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxdata.export.js"></script> 
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxgrid.js"></script>  
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxgrid.filter.js"></script> 
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxgrid.edit.js"></script> 
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxgrid.sort.js"></script> 
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxgrid.selection.js"></script> 
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxgrid.export.js"></script> 
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxgrid.storage.js"></script> 
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxcombobox.js"></script> 
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxgrid.pager.js"></script> 
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxgrid.grouping.js"></script> 
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxgrid.aggregates.js"></script> 
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxgrid.columnsresize.js"></script> 
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxgrid.columnsreorder.js"></script> 

	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxwindow.js"></script>
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/globalization/globalize.js"></script> 
	
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxlistbox.js"></script> 
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxdropdownlist.js"></script>
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxdraw.js"></script> 
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxchart.core.js"></script>

	 
	 
	
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxdatetimeinput.js"></script> 
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxdate.js"></script> 
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxslider.js"></script> 
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxpanel.js"></script> 
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxinput.js"></script> 
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxdragdrop.js"></script> 
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxcalendar.js"></script> 
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxtree.js"></script> 
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxinput.js"></script> 
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxexport.js"></script> 
	 


<script type="text/javascript" src="/shared/js/shared-scripts.js"></script>

	<script type="text/javascript" src="/shared/js/internal-scripts.js"></script> 
	<script type="text/javascript" src="/shared/js/vocabulary_scripts.js"></script>
	<script type="text/javascript" src="/users/js/internal.js"></script>

	
	<script type="text/javascript" src="/annotations/js/annotations.js"></script>


 

<script type="text/javascript" src="/lib/misc/jquery-ui-multiselect-widget-3.0.0/src/jquery.multiselect.js"></script> 
<script type="text/javascript" src="/lib/misc/jquery-ui-multiselect-widget-3.0.0/src/jquery.multiselect.filter.js"></script>


<script type="text/javascript" src="/lib/misc/multizoom/multizoom.js"></script><style type="text/css">.featuredimagezoomerhidden {visibility: hidden!important;}</style>
<link rel="stylesheet" href="/lib/misc/multizoom/multizoom.css">


	<script type="text/javascript" src="/specimens/js/search.js"></script> 
	<script type="text/javascript" src="/lib/JQWidgets/jqwidgets_ver20.0.0/jqwidgets/jqxcheckbox.js"></script>
	<script type="text/javascript" src="/specimens/js/specimens.js"></script>

	<script type="text/javascript" src="/shared/js/tabs.js"></script>

	<script type="text/javascript" src="/transactions/js/transactions.js"></script>

	<script type="text/javascript" src="/taxonomy/js/taxonomy.js"></script>
</head>
<body>
	<cfset action = 'fixedSearch'>
	<div id="overlaycontainer" style="position: relative;">
		<main id="content" class="container-fluid">
			<div class="row mr-0 mr-md-3 mr-xl-5">
				<div class="col-12 mt-1 pb-3 mr-0 mr-md-3 mr-xl-5">
					<cfquery name="getSpecimenCount" datasource="user_login" username="#session.dbuser#" password="#decrypt(session.epw,cookie.cfid)#">
						SELECT count(collection_object_id) as cnt FROM cataloged_item
					</cfquery>
					
					<h1 class="h3 smallcaps mb-1 pl-3">Find Specimen Records <span class="count  font-italic color-green mx-0"><small> #getSpecimenCount.cnt# records</small><small class="sr-only">Tab into search form</small></span></h1>
					<!--- populated with download dialog for external users --->
					<div id="downloadAgreeDialogDiv"></div>
					<!--- Tab header div --->
					<div class="tabs card-header tab-card-header px-2 pt-3">
						<cfswitch expression="#action#">
							<cfcase value="fixedSearch">
								<cfset fixedTabActive = "active">
								<cfset fixedTabShow = "">
								<cfset keywordTabActive = "">
								<cfset keywordTabShow = "hidden">
								<cfset builderTabActive = "">
								<cfset builderTabShow = "hidden">
								<cfset fixedTabAria = "aria-selected=""true"" tabindex=""0"" ">
								<cfset keywordTabAria = "aria-selected=""false"" tabindex=""-1"" ">
								<cfset builderTabAria = "aria-selected=""false"" tabindex=""-1"" ">
							</cfcase>
							<cfcase value="keywordSearch">
								<cfset fixedTabActive = "">
								<cfset fixedTabShow = "hidden">
								<cfset keywordTabActive = "active">
								<cfset keywordTabShow = "">
								<cfset builderTabActive = "">
								<cfset builderTabShow = "hidden">
								<cfset fixedTabAria = "aria-selected=""false"" tabindex=""-1"" ">
								<cfset keywordTabAria = "aria-selected=""true"" tabindex=""0"" ">
								<cfset builderTabAria = "aria-selected=""false"" tabindex=""-1"" ">
							</cfcase>
							<cfcase value="builderSearch">
								<cfset fixedTabActive = "">
								<cfset fixedTabShow = "hidden">
								<cfset keywordTabActive = "">
								<cfset keywordTabShow = "hidden">
								<cfset builderTabActive = "active">
								<cfset builderTabShow = "">
								<cfset fixedTabAria = "aria-selected=""false"" tabindex=""-1"" ">
								<cfset keywordTabAria = "aria-selected=""false"" tabindex=""-1"" ">
								<cfset builderTabAria = "aria-selected=""true"" tabindex=""0"" ">
							</cfcase>
							<cfdefaultcase>
								<cfset fixedTabActive = "active">
								<cfset fixedTabShow = "">
								<cfset keywordTabActive = "">
								<cfset keywordTabShow = "hidden">
								<cfset builderTabActive = "">
								<cfset builderTabShow = "hidden">
								<cfset fixedTabAria = "aria-selected=""true"" tabindex=""0"" ">
								<cfset builderTabAria = "aria-selected=""false"" tabindex=""-1"" ">
								<cfset keywordTabAria = "aria-selected=""false"" tabindex=""-1"" ">
							</cfdefaultcase>
						</cfswitch>
				
						<div class="tab-headers px-0 tabList" role="tablist" aria-label="search panel tabs">
							<button class="col-3 col-md-2 px-2 my-0 #fixedTabActive#" id="basicSearchTabButton" tabid="1" role="tab" aria-controls="fixedSearchPanel" #fixedTabAria#>Basic Search</button>
							<button class="col-3 col-xl-2 px-1 my-0 #keywordTabActive#" id="keywordSearchTabButton" tabid="2" role="tab" aria-controls="keywordSearchPanel" #keywordTabAria# >Keyword Search</button>
							<button class="col-3 col-xl-2 px-1 my-0 #builderTabActive#" id="builderSearchTabButton" tabid="3" role="tab" aria-controls="builderSearchPanel" #builderTabAria# aria-label="search builder tab">Search Builder</button>
						</div>
						<div class="tab-content mt-0 px-0 pb-0">
							<!---Fixed Search tab panel--->
							<script type="text/javascript" language="javascript">
							function toggleIDDetail(onOff) {
								if (onOff==0) {
									$("##IDDetail").hide();
									$("##IDDetailCtl").attr('onCLick','toggleIDDetail(1)').html('<span class="btn-link">show more <i class="fas fa-caret-down" style="vertical-align: middle;" title="more fields"></i></span>');
									$("##IDDetailCtl1").attr('onCLick','toggleIDDetail(1)').html('<span class="btn-link">show more <i class="fas fa-caret-down" style="vertical-align: middle;" title="more fields"></i></span>');
								} else {
									$("##IDDetail").show();
									$("##IDDetailCtl").attr('onCLick','toggleIDDetail(0)').html('<span class="btn-link">show less <i class="fas fa-caret-right" style="vertical-align: middle;" title="fewer fields"></i></span>');
									$("##IDDetailCtl1").attr('onCLick','toggleIDDetail(0)').html('<span class="btn-link">show less <i class="fas fa-caret-right" style="vertical-align: middle;" title="fewer fields"></i></span>');
								}
								<cfif isdefined("session.username") and len(#session.username#) gt 0>
									jQuery.getJSON("/specimens/component/search.cfc",
										{
											method : "saveBasicSrchPref",
											id : 'IDDetail',
											onOff : onOff,
											returnformat : "json",
											queryformat : 'column'
										}, 
										function (data) { 
											console.log(data);
										}
									).fail(function(jqXHR,textStatus,error){
										handleFail(jqXHR,textStatus,error,"persisting IDDetail state");
									});
								</cfif>
							}
							function toggleTaxaDetail(onOff) {
								if (onOff==0) {
									$("##TaxaDetail").hide();
									$("##TaxaDetailCtl").attr('onCLick','toggleTaxaDetail(1)').html('<span class="btn-link">show more <i class="fas fa-caret-down" style="vertical-align: middle;" title="show more fields"></i></span>');
									$("##TaxaDetailCtl1").attr('onCLick','toggleTaxaDetail(1)').html('<span class="btn-link">show more <i class="fas fa-caret-down" style="vertical-align: middle;" title="show more fields"></i></span>');
								} else {
									$("##TaxaDetail").show();
									$("##TaxaDetailCtl").attr('onCLick','toggleTaxaDetail(0)').html('<span class="btn-link">show less <i class="fas fa-caret-right" style="vertical-align: middle;" title="show fewer fields"></i></span>');
									$("##TaxaDetailCtl1").attr('onCLick','toggleTaxaDetail(0)').html('<span class="btn-link">show less <i class="fas fa-caret-right" style="vertical-align: middle;" title="show fewer fields"></i></span>');
								}
								<cfif isdefined("session.username") and len(#session.username#) gt 0>
									jQuery.getJSON("/specimens/component/search.cfc",
										{
											method : "saveBasicSrchPref",
											id : 'TaxaDetail',
											onOff : onOff,
											returnformat : "json",
											queryformat : 'column'
										},
										function (data) { 
											console.log(data);
										}
									).fail(function(jqXHR,textStatus,error){
										handleFail(jqXHR,textStatus,error,"persisting TaxaDetail state");
									});
								</cfif>
							}
							function toggleGeogDetail(onOff) {
								if (onOff==0) {
									$("##GeogDetail").hide();
									$("##GeogDetailCtl").attr('onCLick','toggleGeogDetail(1)').html('<span class="btn-link">show more <i class="fas fa-caret-down" style="vertical-align: middle;" title="show more fields"></i></span>');
									$("##GeogDetailCtl1").attr('onCLick','toggleGeogDetail(1)').html('<span class="btn-link">show more <i class="fas fa-caret-down" style="vertical-align: middle;" title="show more fields"></i></span>');
								} else {
									$("##GeogDetail").show();
									$("##GeogDetailCtl").attr('onCLick','toggleGeogDetail(0)').html('<span class="btn-link">show less <i class="fas fa-caret-right" style="vertical-align: middle;" title="show fewer fields"></i></span>');
									$("##GeogDetailCtl1").attr('onCLick','toggleGeogDetail(0)').html('<span class="btn-link">show less <i class="fas fa-caret-right" style="vertical-align: middle;" title="show fewer fields"></i></span>');
								}
								<cfif isdefined("session.username") and len(#session.username#) gt 0>
									jQuery.getJSON("/specimens/component/search.cfc",
										{
											method : "saveBasicSrchPref",
											id : 'GeogDetail',
											onOff : onOff,
											returnformat : "json",
											queryformat : 'column'
										},
										function (data) { 
											console.log(data);
										}
									).fail(function(jqXHR,textStatus,error){
										handleFail(jqXHR,textStatus,error,"persisting GeogDetail state");
									});
								</cfif>
							}
							function toggleCollDetail(onOff) {
								if (onOff==0) {
									$("##CollDetail").hide();
									$("##CollDetailCtl").attr('onCLick','toggleCollDetail(1)').html('<span class="btn-link">show more <i class="fas fa-caret-down" style="vertical-align: middle;" title="show more fields"></i></span>');
									$("##CollDetailCtl1").attr('onCLick','toggleCollDetail(1)').html('<span class="btn-link">show more <i class="fas fa-caret-down" style="vertical-align: middle;" title="show more fields"></i></span>');
								} else {
									$("##CollDetail").show();
									$("##CollDetailCtl").attr('onCLick','toggleCollDetail(0)').html('<span class="btn-link">show less <i class="fas fa-caret-right" style="vertical-align: middle;" title="show fewer fields"></i></span>');
									$("##CollDetailCtl1").attr('onCLick','toggleCollDetail(0)').html('<span class="btn-link">show less <i class="fas fa-caret-right" style="vertical-align: middle;" title="show fewer fields"></i></span>');
								}
								<cfif isdefined("session.username") and len(#session.username#) gt 0>
									jQuery.getJSON("/specimens/component/search.cfc",
										{
											method : "saveBasicSrchPref",
											id : 'CollDetail',
											onOff : onOff,
											returnformat : "json",
											queryformat : 'column'
										},
										function (data) { 
											console.log(data);
										}
									).fail(function(jqXHR,textStatus,error){
										handleFail(jqXHR,textStatus,error,"persisting CollDetail state");
									});
								</cfif>
							}
							function toggleSpecDetail(onOff) {
								if (onOff==0) {
									$("##SpecDetail").hide();
									$("##SpecDetailCtl").attr('onCLick','toggleSpecDetail(1)').html('<span class="btn-link">show more <i class="fas fa-caret-down" style="vertical-align: middle;" title="show more fields"></i></span>');
									$("##SpecDetailCtl1").attr('onCLick','toggleSpecDetail(1)').html('<span class="btn-link">show more <i class="fas fa-caret-down" style="vertical-align: middle;" title="show more fields"></i></span>');
								} else {
									$("##SpecDetail").show();
									$("##SpecDetailCtl").attr('onCLick','toggleSpecDetail(0)').html('<span class="btn-link">show less <i class="fas fa-caret-right" style="vertical-align: middle;" title="show fewer fields"></i></span>');
									$("##SpecDetailCtl1").attr('onCLick','toggleSpecDetail(0)').html('<span class="btn-link">show less <i class="fas fa-caret-right" style="vertical-align: middle;" title="show fewer fields"></i></span>');
								}
								<cfif isdefined("session.username") and len(#session.username#) gt 0>
									jQuery.getJSON("/specimens/component/search.cfc",
										{
											method : "saveBasicSrchPref",
											id : 'SpecDetail',
											onOff : onOff,
											returnformat : "json",
											queryformat : 'column'
										},
										function (data) { 
											console.log(data);
										}
									).fail(function(jqXHR,textStatus,error){
										handleFail(jqXHR,textStatus,error,"persisting SpecDetail state");
									});
								</cfif>
							}
						</script>

						</div>
					</div>
				</div>
			</div>
		</main>
		<!--- 
		<div>
			<div class="col-12 col-md-6 mx-auto mb-3 pb-3">
				<p class="blockquote small text-center">Collection records at the Museum of Comparative Zoology may contain language that reflect historical place or taxon names in its original form that are no longer acceptable or appropriate in an inclusive environment. While the MCZ is  preserving data in their original form in order to retain authenticity and facilitate research, we do not condone this language and are committed to address the problem of racial and other derogatory language present in our database.</p>
			</div>
		</div>
		--->
		<div id="overlay" style="position: absolute; top:0px; left:0px; width: 100%; height: 100%; background: rgba(0,0,0,0.5); border-color: transparent; opacity: 0.99; display: none; z-index: 2;">
			<div class="jqx-rc-all jqx-fill-state-normal" style="position: absolute; left: 50%; top: 25%; width: 10em; height: 2.4em;line-height: 2.4em; padding: 5px; color: ##333333; border-color: ##898989; border-style: solid; margin-left: -5em; opacity: 1;">
				<div class="jqx-grid-load" style="float: left; overflow: hidden; height: 32px; width: 32px;"></div>
				<div style="float: left; display: block; margin-left: 1em;" >Searching...</div>	
			</div>
		</div>	
	</div><!--- end overlaycontainer --->	

	<!---  TODO: Work the special case specimen search showLeftPush and showRightPush sections back into the standard grid divs used everywhere else above.
			<section class="container-fluid">
				<div class="row">
					<div class="col-12">
						<div id="jqxWidget">
							<div class="mb-5">
								<div class="row mx-0">
								<div id="searchResultsGrid" class="jqxGrid"></div>
								<div class="mt-005" id="enableselection"></div>
								<div style="margin-top: 30px;">
									<div id="cellbegineditevent"></div>
									<div style="margin-top: 10px;" id="cellendeditevent"></div>
								</div>
								<div id="popupWindow" style="display:none;">
									<div style="padding:.25em;">Edit</div>
									<div style="overflow: hidden;">
										<div class="container-fluid">
											<div class="row">
												<fieldset>
													<legend class="sr-only">Editable fields</legend>
													<label for="imageurl">Image:</label>
													<input id="imageurl" class="fs-13 mx-1 px-1 border-0">
													<label for="collection">Collection:</label>
													<input id="collection" class="mx-1 px-1 border-0">
													<label for="cat_num">Catalog Number:</label>
													<input id="cat_num" class="mx-1 px-1 border-0">
													<label for="began_date">Began Date:</label>
													<input id="began_date" class="mx-1">
													<label for="ended_date">Ended Date:</label>
													<input id="ended_date" class="mx-1">
													<label for="scientific_name">Scientific Name:</label>
													<input id="scientific_name" class="mx-1 px-1 border-0">
													<label for="higher_geog">Higher Geography:</label>
													<input id="higher_geog" class="mx-1 px-1 border-0">
													<label for="spec_locality">Specific Locality:</label>
													<input id="spec_locality" class="mx-1 px-1 border-0">
													<label for="collectors">Collectors:</label>
													<input id="collectors" class="mx-1 border-0" />
													<label for="verbatim_date">Verbatim Date:</label>
													<input id="verbatim_date" class="mx-1 border-0">
													<label for="coll_obj_disposition">Disposition:</label>
													<input id="coll_obj_disposition" class="mx-1 border-0">
													<label for="othercatalognumbers">Other Cat Nums:</label>
													<textarea id="othercatalognumbers" class="mx-1 border-0"></textarea>
													<input aria-label="save button" class="mr-1" type="button" id="Save" value="Save" />
													<input aria-label="cancel button" id="Cancel" type="button" value="Cancel" />
												</fieldset>
											</div>
										</div>
									</div>
								</div>
							</div>
							</div>
							<nav aria-label="filter_menu" class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-right zindex-sticky" id="cbp-spmenu-s2">
							<section> <a id="showRightPush" class="btn black-filter-btn hiddenclass" role="button" aria-label="refine results slider">Refine Results</a> </section>
							<h3 class="filters">Refine Results</h3>
							<div class="col-md-3 py-2 px-4 mb-3 pl-3 bg-transparent">
								<div class="float-left">
									<label for="columnchooser" class="mt-1"><em>By Columns in Dropdown</em></label>
									<div id="columnchooser" class="mb-1"></div>
									<div class="mt-2"><em>Then by checkboxes of values</em></div>
									<div class="mt-1 ml-0 d-inline float-left w-257" id="filterbox">
										<p>Search for something to filter</p>
									</div>
									<div>
										<input type="button" id="applyfilter" class="d-inline float-left ml-0 mr-3 mt-2 py-1 px-2 fs-14" aria-label="apply filter" value="Apply Filter"/>
										<input type="button" id="clearfilter" class="d-inline ml-0 mt-2 py-1 px-2 fs-14" value="Clear Filter"/>
									</div>
								</div>
							</nav>
							<nav aria-label="choose_columns" class="cbp-spmenu cbp-spmenu-vertical-left cbp-spmenu-left zindex-sticky" id="cbp-spmenu-s3">
								<section> <a id="showLeftPush" class="btn black-columns-btn hiddenclass" aria-label="display column selections" role="button">Columns</a> </section>
								<h3 class="columns">Display Columns</h3>
								<div class="col-md-3 mb-3 pl-1 mt-2">
									<ul class="checks">
										<li>
											<input type="radio" aria-label="check all">
											Check all </li>
										<li>
											<input type="radio" aria-label="most often displayed">
											Minimum</li>
									</ul>
									<div class="float-left zindex-sticky bg-white">
										<div id="jqxlistbox2" class="ml-1 mt-3"></div>
									</div>
								</div>
							</nav>
						</div>
					</div>
				</div>
			</section>
		</main>
		--->
	
	<div class="container-fluid" id="fixedSearchResultsSection">
									<div class="row">
										<div class="col-12">
											<div class="mb-3">
												<div class="row mx-0 mt-1 mb-0 pb-2 pb-md-0 jqx-widget-header border px-2">
													<h1 class="h4 ml-2 ml-md-1 pt3px">
														<span tabindex="0">Results:</span> 
														<span class="pr-2 font-weight-normal" id="fixedresultCount" tabindex="0"></span> 
														<span id="fixedresultLink" class="font-weight-normal pr-2"></span>
													</h1>
													<div id="fixedshowhide"></div>
													<div id="fixedsaveDialogButton" class=""></div>
													<div id="fixedsaveDialog"></div>
													<div id="fixedcolumnPickDialog">
														<div class="container-fluid">
															<div class="row pick-column-width" id="fixedcolumnPick_row">
																<div class="col-12 col-md-3">
																	<div id="fixedcolumnPick" class="px-1"></div>
																</div>
																<div class="col-12 col-md-3">
																	<div id="fixedcolumnPick1" class="px-1"></div>
																</div>
																<div class="col-12 col-md-3">
																	<div id="fixedcolumnPick2" class="px-1"></div>
																</div>
																<div class="col-12 col-md-3">
																	<div id="fixedcolumnPick3" class="px-1"></div>
																</div>
															</div>
														</div>
													</div>
													<div id="fixedcolumnPickDialogButton"></div>
													<div id="fixedresultDownloadButtonContainer"></div>
													<span id="fixedmanageButton" class=""></span>
													<span id="fixedremoveButtonDiv" class=""></span>
													<div id="fixedresultBMMapLinkContainer"></div>
													<div id="fixedselectModeContainer" class="ml-3" style="display: none;" >
														<script>
															function fixedchangeSelectMode(){
																var selmode = $("singlecell").val();
																$("##fixedsearchResultsGrid").jqxGrid({selectionmode: selmode});
																if (selmode=="singlecell") { 
																	$("##fixedsearchResultsGrid").jqxGrid({enableBrowserSelection: true});
																} else {
																	$("##fixedsearchResultsGrid").jqxGrid({enableBrowserSelection: false});
																}
															};
														</script>

														<label class="data-entry-label d-inline w-auto mt-1" for="fixedselectMode">Grid Select:</label>
														<select class="data-entry-select d-inline w-auto mt-1" id="fixedselectMode" onChange="fixedchangeSelectMode();">
															<cfif defaultSelectionMode EQ 'singlecell'><cfset selected="selected"><cfelse><cfset selected=""></cfif>
															<option selected value="singlecell">Single Cell</option>
															<cfif defaultSelectionMode EQ 'singlerow'><cfset selected="selected"><cfelse><cfset selected=""></cfif>
															<option #selected# value="singlerow">Single Row</option>
															<cfif defaultSelectionMode EQ 'multiplerowsextended'><cfset selected="selected"><cfelse><cfset selected=""></cfif>
															<option #selected# value="multiplerowsextended">Multiple Rows (click, drag, release)</option>
															<cfif defaultSelectionMode EQ 'multiplecellsadvanced'><cfset selected="selected"><cfelse><cfset selected=""></cfif>
															<option #selected# value="multiplecellsadvanced">Multiple Cells (click, drag, release)</option>
														</select>
													</div>
												
													<output id="fixedactionFeedback" class="btn btn-xs btn-transparent my-2 px-2 mx-1 pt-1 border-0"></output>
												</div>
												<!--- TODO: Figure out how to make this sticky row work on the column header row --->
												<div class="row mx-0 mt-0"> 
													
													<!--- Grid Related code is below along with search handlers --->
													<div id="fixedsearchResultsGrid" class="jqxGrid" role="table" aria-label="Search Results Table">
													</div>
													<div id="fixedPostGridControls" class="p-1 d-none d-md-block" style="display: none;" >
														<!--- a mouse wheel toggle could go here --->
													</div>
													
												</div>
											</div>
										</div>
									</div>
								</div>
<div id="testGrid"></div>
<script>
//var data = [ { name: "A", age: 1 }, { name: "B", age: 2 } ];
//var source = { datatype: "array", localdata: data };
//var dataAdapter = new $.jqx.dataAdapter(source);

	$("##fixedsearchResultsGrid").jqxGrid({
					width: '100%',
					autoheight: 'true',
					source: dataAdapter,
					filterable: false,
					sortable: true,
					pageable: true,
					editable: false,
					virtualmode: true,
					enablemousewheel: #session.gridenablemousewheel#,
					keyboardnavigation: true,
					pagesize: '#session.specimens_pagesize#',
					pagesizeoptions: ['5','10','25','50','100','500'], // fixed list regardless of actual result set size, dynamic reset goes into infinite loop.
					showaggregates: true,
					columnsresize: true,
					autoshowfiltericon: true,
					autoshowcolumnsmenubutton: false,
					autoshowloadelement: false,  // overlay acts as load element for form+results
					columnsreorder: true,
					groupable: true,
					selectionmode: 'singlecell',
					//enablebrowserselection: #defaultenablebrowserselection#,
					altrows: true,
					showtoolbar: false,
//					ready: function () {
//						$("##fixedsearchResultsGrid").jqxGrid('selectrow', 0);
//						$("##fixedsearchResultsGrid").jqxGrid('focus');
//					},
					rendergridrows: function () {
						return dataAdapter.records;
					},
					columns: [
						<cfif isdefined("session.roles") and listfindnocase(session.roles,"manage_specimens")>
							<cfif isdefined("session.killRow") AND session.killRow GT 0>
								<cfset removerow = "{text: 'Remove', datafield: 'RemoveRow', cellsrenderer:removeFixedCellRenderer, width: 40, cellclassname: fixedcellclass, hidable:false, hidden: false },">
								#removerow#
							</cfif>
						</cfif>
						<cfset lastrow ="">
						<cfloop query="getFieldMetadata">
							<cfset cellrenderer = "">
							<cfif len(getFieldMetadata.cellsrenderer) GT 0>
								<cfif left(getFieldMetadata.cellsrenderer,1) EQ "_"> 
									<cfset cellrenderer = " cellsrenderer:fixed#getFieldMetadata.cellsrenderer#,">
								<cfelse>
									<cfset cellrenderer = " cellsrenderer:#getFieldMetadata.cellsrenderer#,">
								</cfif>
							</cfif> 
							<cfif ucase(data_type) EQ 'DATE'>
								<cfset filtertype = " filtertype: 'date',">
							<cfelse>
								<cfset filtertype = "">
							</cfif>
							<cfif ucase(column_name) EQ lastcolumn>
								<!--- last column, no trailing comma --->
								<cfset lastrow = "{text: '#label#', datafield: '#ucase(column_name)#',#filtertype##cellrenderer# width: #width#, cellclassname: fixedcellclass, hidable:#hideable#, hidden: getColHidProp('#ucase(column_name)#', #hidden#), editable: false }">
							<cfelse> 
								{text: '#label#', datafield: '#ucase(column_name)#',#filtertype##cellrenderer# width: #width#, cellclassname: fixedcellclass, hidable:#hideable#, hidden: getColHidProp('#ucase(column_name)#', #hidden#) },
							</cfif>
						</cfloop>
						#lastrow#
					],
					
					rowdetails: true,
					rowdetailstemplate: {
						rowdetails: "<div style='margin: 10px;'>Row Details</div>",
						rowdetailsheight:  1 // row details will be placed in popup dialog
					},
					initrowdetails: initRowDetails
				});

				<cfif isdefined("session.username") and len(#session.username#) gt 0>
					$('##fixedsearchResultsGrid').jqxGrid().on("columnreordered", function (event) { 
						columnOrderChanged('fixedsearchResultsGrid'); 
					}); 
				</cfif>
				
				$("##fixedsearchResultsGrid").on("bindingcomplete", function(event) {
					
					
						$("##fixedsearchResultsGrid").attr('tabindex', 0);

						// Set all interactive descendants to non-tabbable
						$("##fixedsearchResultsGrid").find('a, button, input').attr('tabindex', -1);

						var columns = $("##fixedsearchResultsGrid").jqxGrid('columns').records;
						if (columns && columns.length > 0) {
							$("##fixedsearchResultsGrid").jqxGrid('selectcell', 0, columns[0].datafield);
						}
						$("##fixedsearchResultsGrid").focus();

						// The rest of your existing logic...
						$("##fixedsearchResultsGrid").on('focusin', function(event) {
							// Check if any cell is already selected
							var selection = $("##fixedsearchResultsGrid").jqxGrid('getselectedcell');
							if (!selection || typeof selection.rowindex === "undefined" || !selection.datafield) {
								var columns = $("##fixedsearchResultsGrid").jqxGrid('columns').records;
								if (columns && columns.length > 0) {
									$("##fixedsearchResultsGrid").jqxGrid('selectcell', 0, columns[0].datafield);
								}
							}
						});
					
					<cfif NOT isDefined("session.gridscrolltotop") OR session.gridscrolltotop EQ "true">
						if (document <= 900){
							$(document).scrollTop(200);
						} else {
							$(document).scrollTop(480);
						}
					</cfif>
			
					// add a link out to this search, serializing the form as http get parameters
					$('##fixedresultLink').html('<a href="/Specimens.cfm?execute=true&' + $('##fixedSearchForm :input').filter(function(index,element){ return $(element).val()!='';}).not(".excludeFromLink").serialize() + '">Link to this search</a>');
					$('##fixedshowhide').html('<button class="my-2 border rounded" title="hide search form" onclick=" toggleSearchForm(\'fixed\'); "><i id="fixedSearchFormToggleIcon" class="fas fa-eye-slash"></i></button>');
					if (fixedSearchLoaded==0) { 
						try { 
							gridLoaded('fixedsearchResultsGrid','occurrence record','fixed');
						} catch (e) { 
							console.log(e);
							messageDialog("Error in gridLoaded handler:" + e.message,"Error in gridLoaded");
						}
						fixedSearchLoaded = 1;
						loadColumnOrder('fixedsearchResultsGrid');
					}
					<cfif isdefined("session.roles") and listfindnocase(session.roles,"manage_specimens")>
						$('##fixedmanageButton').html('<a href="specimens/manageSpecimens.cfm?result_id='+$('##result_id_fixedSearch').val()+'" target="_blank" class="btn btn-xs btn-secondary px-2 my-2 mx-1" >Manage</a>');
					<cfelse>
						$('##fixedmanageButton').html('');
					</cfif>
					<cfif isdefined("session.roles") and listfindnocase(session.roles,"manage_specimens")>
						<cfif isdefined("session.killRow") AND session.killRow EQ 2>
							<cfif isdefined("session.roles") and listfindnocase(session.roles,"manage_specimens")>
								$('##fixedremoveButtonDiv').html('<button id="fixedremoveButton" class="btn btn-xs btn-secondary px-2 my-2 mx-1 disabled" disabled onclick="removeFixedSelectedRows(); " >Remove Checked</a>');
							<cfelse>
								$('##fixedremoveButtonDiv').html('');
							</cfif>
						</cfif>
					</cfif>
					pageLoaded('fixedsearchResultsGrid','occurrence record','fixed');
					<cfif isDefined("session.specimens_pin_guid") AND session.specimens_pin_guid EQ 1> 
						console.log(#session.specimens_pin_guid#);
						setPinColumnState('fixedsearchResultsGrid','GUID',true);
					</cfif>
				});
				$('##fixedsearchResultsGrid').on('rowexpand', function (event) {
					//  Create a content div, add it to the detail row, and make it into a dialog.
					var args = event.args;
					var rowIndex = args.rowindex;
					var datarecord = args.owner.source.records[rowIndex];
					console.log(rowIndex);
					createSpecimenRowDetailsDialog('fixedsearchResultsGrid','fixedrowDetailsTarget',datarecord,rowIndex);
				});
				$('##fixedsearchResultsGrid').on('rowcollapse', function (event) {
					// remove the dialog holding the row details
					var args = event.args;
					var rowIndex = args.rowindex;
					$("##fixedsearchResultsGridRowDetailsDialog" + rowIndex ).dialog("destroy");
				});
				// display selected row index.
				$("##fixedsearchResultsGrid").on('rowselect', function (event) {
					$("##fixedselectrowindex").text(event.args.rowindex);
				});
				// display unselected row index.
				$("##fixedsearchResultsGrid").on('rowunselect', function (event) {
					$("##fixedunselectrowindex").text(event.args.rowindex);
				});
			});
</script>

							

<cfinclude template="/shared/_footer.cfm">
